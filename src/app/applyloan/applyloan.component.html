<div class="container">
  <form [formGroup]="form" (ngSubmit)="submit()">
    <p class="display_error">{{errormessage}}</p>
    <br>
    <p class="display_sucess">{{sucessmessage}}</p>
    <div class="row">
      <div class="col-sm">
        <br />
        <label class="apply_loan"
          ><span class="error">* </span>Loan Type:</label
        >
        <select
          id="loantype"
          class="apply_loan input"
          formControlName="loanType"
          [(ngModel)]="loan.loanType"
          (change)="onOptionsSelected(form.get('loanType').value)"
        >
          <option disabled>Select Type</option>
          <option value="personal">Personal</option>
          <option value="housing">Housing</option>
          <option value="educational">Educational</option>
        </select>
        <div
          *ngIf="
            form.get('loanType').invalid &&
            (form.get('loanType').dirty || form.get('loanType').touched)
          "
        >
          <mat-error *ngIf="form.get('loanType').hasError('required')">
            <small class="error"> *Loan type is required.</small>
          </mat-error>
        </div>
      </div>
      <div class="col-sm">
        <br />
        <label class="apply_loan"
          ><span class="error">* </span>Loan Amount:</label
        >
        <input
          id="loanamount"
          class="apply_loan input"
          type="text"
          formControlName="loanAmount"
          name="loanAmount"
          [(ngModel)]="loan.loanAmount"
        />
        <div
          *ngIf="
            form.get('loanAmount').invalid &&
            (form.get('loanAmount').dirty || form.get('loanAmount').touched)
          "
        >
          <mat-error *ngIf="form.get('loanAmount').hasError('required')">
            <small class="error"> *Loan amount is required.</small>
          </mat-error>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm">
        <br />
        <label class="apply_loan"
          ><span class="error">* </span>Loan Issue date:</label
        >
        <input
          id="loanissuedate"
          class="apply_loan input"
          name="issueDate"
          type="date"
          formControlName="issueDate"
          [min]="minDate"
          [(ngModel)]="loan.loanIssueDate"
        />
        <div
          *ngIf="
            form.get('issueDate').invalid &&
            (form.get('issueDate').dirty || form.get('issueDate').touched)
          "
        >
          <mat-error *ngIf="form.get('issueDate').hasError('required')">
            <small class="error"> *Loan issue date is required.</small>
          </mat-error>
        </div>
      </div>

      <div class="col-sm">
        <br />
        <label class="apply_loan"
          ><span class="error">* </span>Rate of Interest:</label
        >
        <input
          id="rateofinterest"
          class="apply_loan input"
          type="text"
          formControlName="rateOfInterest"
          value="{{ roi }}"
          [(ngModel)]="loan.rateOfInterest"
        />
      </div>
    </div>

    <br />
    <br />
    <div class="optional_input">
      <label class="apply_loan"
        ><span class="error">* </span>Duration Of the Loan:</label
      >
      <select
        id="loanduration"
        class="apply_loan input_optional"
        formControlName="loanDuration"
        [(ngModel)]="loan.loanDuration"
      >
        <option disabled>Select Duration</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
        <option value="20">20</option>
      </select>&nbsp;&nbsp;
      <span
        *ngIf="
          form.get('loanDuration').invalid &&
          (form.get('loanDuration').dirty || form.get('loanDuration').touched)
        "
      >
        <mat-error *ngIf="form.get('loanDuration').hasError('required')">
          <small class="error"> *Loan duration is required.</small>
        </mat-error>
    </span>
    </div>

    <ng-container
      *ngIf="form.get('loanType').value === 'educational'"
      class="form-control"
    >
      <div class="optional_input">
        <br />
        <br />
        <div >
          <label class="apply_loan"
            ><span class="error">* </span>Course fee:</label
          >
          <input
            id="coursefee"
            class="apply_loan input_optional"
            type="text"
            formControlName="courseFee"
            [(ngModel)]="loan.courseFee"
          />&nbsp;&nbsp;
          <span
            *ngIf="
              form.get('courseFee').invalid &&
              (form.get('courseFee').dirty || form.get('courseFee').touched)
            "
          >
            <mat-error *ngIf="form.get('courseFee').hasError('required')">
              <small class="error"> *Course fee is required.</small>
            </mat-error>
          </span>
        </div>

        <br />
        <div class="optional_input">
          <label class="apply_loan"><span class="error">* </span>Course:</label>
          <select
            id="coursename"
            class="apply_loan input_optional"
            formControlName="courseName"
            [(ngModel)]="loan.courseName"
          >
            <option disabled>Course Name</option>
            <option value="be">B.E</option>
            <option value="btech">B.Tech</option>
          </select>&nbsp;&nbsp;
          <span
            *ngIf="
              form.get('courseName').invalid &&
              (form.get('courseName').dirty || form.get('courseName').touched)
            "
          >
            <mat-error *ngIf="form.get('courseName').hasError('required')">
              <small class="error"> *Course name is required.</small>
            </mat-error>
          </span>
        </div>
        <br />
    
        <div class="optional_input">
          <label class="apply_loan"
            ><span class="error">* </span>Father name:</label
          >
          <input
            id="fathername"
            class="apply_loan input_optional"
            type="text"
            formControlName="fatherName"
            [(ngModel)]="loan.fatherName"
          />&nbsp;&nbsp;
          <span
            *ngIf="
              form.get('fatherName').invalid &&
              (form.get('fatherName').dirty || form.get('fatherName').touched)
            "
          >
            <mat-error *ngIf="form.get('fatherName').hasError('required')">
              <small class="error"> *Father name is required.</small>
            </mat-error>
          </span>
        </div>
        <br />
      </div>
    </ng-container>

    <ng-container
      *ngIf="
        form.get('loanType').touched &&
        (form.get('loanType').value === 'personal' ||
          form.get('loanType').value === 'housing')
      "
      class="form-control"
    >
      <div>
        <br />
        
        <div class="optional_input">
          <label class="apply_loan"
            ><span class="error">* </span>Annual Income:</label
          >
          <input
            id="annualincome"
            type="text "
            class="apply_loan input_optional"
            formControlName="annualIncome"
            [(ngModel)]="loan.annualIncome"
            required
          />&nbsp;&nbsp;
          <span
            *ngIf="
              form.get('annualIncome').invalid &&
              (form.get('annualIncome').dirty ||
                form.get('annualIncome').touched)
            "
          >
            <mat-error *ngIf="form.get('annualIncome').hasError('required')">
              <small class="error"> *Annual Income is required.</small>
            </mat-error>
          </span>
        </div>
        <br />
        <div class="optional_input">
        <label class="apply_loan"
          ><span class="error">* </span>Company Name:</label
        >
        <input
          id="companyname"
          type="text "
          class="apply_loan input_optional "
          [(ngModel)]="loan.companyName"
          formControlName="companyName"
          required
        />&nbsp;&nbsp;
        <span
          *ngIf="
            form.get('companyName').invalid &&
            (form.get('companyName').dirty || form.get('companyName').touched)
          "
        >
          <mat-error *ngIf="form.get('companyName').hasError('required')">
            <small class="error"> *Company name is required.</small>
          </mat-error>
        </span>
    </div>
        <br />
      </div>
    </ng-container>
    <br/>
    <br />
    <button type="submit " class='btn-primary'>Submit</button>&nbsp; &nbsp;
    <button type="reset" (click)="reset()">Reset</button>&nbsp; &nbsp;
  </form>
</div>
